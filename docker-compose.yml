version: '3.8'

services:
  # WhatsApp Bot Application (using Supabase)
  app:
    build: .
    container_name: whatsapp-bot-app
    restart: unless-stopped
    environment:
      # Telegram
      TELEGRAM_BOT_TOKEN: ${TELEGRAM_BOT_TOKEN}
      TELEGRAM_CHANNEL_USERNAME: ${TELEGRAM_CHANNEL_USERNAME}

      # Evolution API
      EVOLUTION_API_URL: ${EVOLUTION_API_URL}
      EVOLUTION_API_KEY: ${EVOLUTION_API_KEY}

      # Database (Supabase - external)
      DATABASE_URL: ${DATABASE_URL}

      # Redis (optional - leave empty if not using broadcast queue)
      REDIS_URL: ${REDIS_URL:-}

      # Server
      PORT: ${PORT:-3000}
      NODE_ENV: ${NODE_ENV:-production}
      WEBHOOK_URL: ${WEBHOOK_URL}
    ports:
      - "${PORT:-3000}:${PORT:-3000}"
    volumes:
      - ./logs:/app/logs

# No local database - using Supabase
